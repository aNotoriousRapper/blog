<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
{% extends "layout.html" %}


{% block content %}
<p><a href="{{ url_for('routes.CreatePost') }}">发布帖子</a> </p>

<h1>帖子列表</h1>
    {% if posts %}
        <ul>
        {% for post in posts %}
            <li>
                <h2><a href="{{ url_for('routes.PostPage', post_id=post.id) }}">{{ post.title }}</a></h2>
                <p>{{ post.content[:150] }}...</p>  <!-- 只显示前150个字 -->
                <small>
                    作者：{{ post.author.username }} |
                    发布时间：{{ post.created_at.strftime("%Y-%m-%d %H:%M") }}
                </small>
                <br>
                <small>标签：
                {% for tag in post.tags %}
                    <span>{{ tag.name }}</span>
                {% else %}
                    <span>无标签</span>
                {% endfor %}
                </small>
            </li>
            <hr>
        {% endfor %}
        </ul>
    {% else %}
        <p>暂无帖子。</p>
    {% endif %}
{% endblock %}


</body>
</html>